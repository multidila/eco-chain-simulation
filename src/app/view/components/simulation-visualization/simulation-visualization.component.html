<div class="visualization-container">
	<mat-card class="info-card">
		<mat-card-header class="info-card-header">
			<mat-card-title>Information</mat-card-title>
		</mat-card-header>
		<mat-card-content>
			<div class="stats">
				<div class="stat-item">
					<span class="label">Iteration:</span>
					<span class="value">{{ stats().iteration + 1 }}</span>
				</div>
				<div class="stat-item">
					<span class="label">Total Agents:</span>
					<span class="value">{{ stats().total }}</span>
				</div>
				<div class="stat-item plant">
					<span class="label">Plants:</span>
					<span class="value">{{ stats().plants }}</span>
				</div>
				<div class="stat-item herbivore">
					<span class="label">Herbivores:</span>
					<span class="value">{{ stats().herbivores }}</span>
				</div>
				<div class="stat-item carnivore">
					<span class="label">Carnivores:</span>
					<span class="value">{{ stats().carnivores }}</span>
				</div>

				@if (hasHistory) {
					<div class="timeline-controls">
						<span class="timeline-label">History Timeline</span>
						<mat-slider [min]="1" [max]="maxIteration" [step]="1" [discrete]="true">
							<input
								matSliderThumb
								[ngModel]="displayIteration"
								(ngModelChange)="onIterationChange($event)"
							/>
						</mat-slider>
						<span class="iteration-display">{{ displayIteration }} / {{ maxIteration }}</span>
					</div>
				}
			</div>
		</mat-card-content>
	</mat-card>

	<mat-card class="grid-card">
		<mat-card-content>
			<app-grid-view [state]="displayedState()" [grid]="displayedGrid()" />
		</mat-card-content>
	</mat-card>
</div>
